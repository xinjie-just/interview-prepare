# npm、cnpm、yarn 和 pnpm 区别

`npm`、`cnpm`、`yarn` 和 `pnpm` 这四种包管理器主要的区别在于它们的性能、使用场景和其他特性。

1. npm：`npm` 是 `Node.js` 的默认包管理器，拥有数量庞大的包供开发者使用，具有广泛的生态系统和大量的社区支持。它能方便地管理项目依赖和版本控制，提供了一些实用的命令和功能。然而，`npm` 是按照队列依次安装每个 `package`，当前一个 `package` 安装完成之后，才能继续后面的安装，安装包的速度较慢，特别是在网络不稳定的情况下，包的安装和更新可能会产生冲突或版本不一致的问题。

2. cnpm：`cnpm` 是淘宝镜像团队提供的 `npm` 镜像，允许在中国境内更快地安装和下载 `npm` 包。`cnpm` 使用与 `npm` 相同的命令行接口，可以让用户在中国境内加速包的下载和安装。然而，`cnpm` 的镜像可能不及时更新，可能会导致某些包版本较旧或不可用。

3. yarn：`yarn` 是由 `Facebook` 开发的另一个包管理器，旨在解决 `npm` 在性能和一致性方面的一些问题。它使用与 `npm` 相同的包注册表，可以同时处理多个任务的安装，通过并行安装和缓存机制优化了性能。`yarn` 还锁定了依赖版本，确保在不同环境中安装相同的包版本。但是，`yarn` 需要额外的安装步骤，与 `npm` 相比，使用上有一定的学习曲线。对于某些特定的项目或场景，可能与 `npm` 存在不兼容性。

4. pnpm：`pnpm` 是另一种包管理器，它通过共享相同的依赖项来减少磁盘空间的占用。它使用硬链接或符号链接来共享依赖项，这可以节省磁盘空间，因为共享相同的依赖项只占用一次磁盘空间。`pnpm` 的安装速度也更快，因为不需要重复安装相同的依赖项，解决了 `npm` 、`yarn` 重复文件过多、复用率低等问题。。然而，`pnpm` 需要额外的安装步骤，与 `npm` 相比，使用上有一定的学习曲线。

总的来说，`npm` 是 `Node.js` 的默认包管理器，具有庞大的生态系统和广泛的社区支持；`yarn` 则是为了解决 `npm` 在性能和一致性方面的问题而开发出来的；`cnpm` 则适用于中国的国情，可以加速包的下载和安装；而 `pnpm` 则通过共享依赖项来减少磁盘空间的占用。

|                              | pnpm               | yarn                | npm                  |
| ---------------------------- | ------------------ | ------------------- | -------------------- |
| workspace 支持               | √                  | √                   | √                    |
| 隔离 nodemodules             | √﹣默认            | √                   | ×                    |
| 提升 node_modules （扁平化） | √                  | √                   | √﹣默认              |
| Plug'n'Play                  | √                  | √﹣默认             | ×                    |
| 零安装                       | ×                  | √                   | ×                    |
| 修补依赖项                   | ×                  | √                   | ×                    |
| 管理 Node.js 版本            | √                  | ×                   | ×                    |
| 有 lock （锁）文件           | √﹣ pnpm.lock-yaml | √- yarn.lock        | √- package-lock.json |
| 支持覆盖                     | √                  | √- 通过 resolutions | √                    |
| 内容可寻址存储               | √                  | ×                   | ×                    |
| 动态包执行                   | √﹣通过 pnpm dlx   | √- 通过 yarn dlx    | √- 通过 npx          |
