# JS 垃圾回收

JS 垃圾回收（Garbage Collection）。已经用过了，再也用不到的那些数据会被清除。

闭包的数据会常驻内存，永远不会被清理。闭包不是内存泄漏，它是预期的回收不了。非预期的回收不了才是内存泄漏。

## 垃圾回收两种方式

1. 引用计数

当一个对象被使用的次数变为 0 ，就会被清理，不是 0 的时候就不会被清除。

引用计数有一个缺陷，当循环引用的时候，清除不了，造成内存泄漏。

2. 标记清除

每隔一定时间，从 `Window` 开始遍历，能找到就保留，找不到就清除。

标记-清除算法分为两个阶段，标注和清除。标记阶段标记出所有需要回收的对象，清除阶段回收被标记的对象所占用的空间。


**参考**

[JavaScript垃圾收集-标记清除和引用计数](https://www.cnblogs.com/scottjeremy/p/6870729.html)
