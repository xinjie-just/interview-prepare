# 实际工作中对 Vue 做过哪些优化

1. v-if 和 v-show

v-if 会对 DOM 销毁和重建，v-show 会使用 CSS 隐藏和显示。

2. v-for 使用 key

***下面是高级面试中应该重点答出来的：***

3. computed 缓存数据

4. keep-alive 缓存组件

5. 异步组件

6. 路由懒加载

7. SSR 服务端渲染

## 连环问：使用 Vue 过程中遇到过哪些坑？

- 内存泄漏

全局函数、全局变量、全局定时器，在页面卸载的时候没有销毁。还有自定义事件。
EventBus 自定义事件，页面卸载时，要销毁这个自定义事件。

- Vue2 响应式的缺陷（Vue 已经不存在了）

新增属性用 Vue.set。
删除属性用 Vue.delete。
无法直接修改数据 arr[index] = data。

- 路由切换时，滚动到顶部（SPA 都有这个问题）

单页应用是路由切换，会销毁当前页面，创建下一个页面，像 v-if 的功能。

例如在移动端有一个列表页，向上滑动加载了第二页数据了，点击某一条跳转到详情页，再从详情页返回列表页，会重新渲染列表页，重新渲染第一页，就会滚动到顶部去。

解决方法：
缓存 scrollTop，返回到列表页时使用 scrollTo 滚动到原来位置。
如果是 web 页面，缓存分页数据，返回时使用缓存的分页数据重新加载到原来的页码。
MPA + APP WebView 方法是终极解决方法。在 APP 中有 `new WebView()` 能够创建一个新的页面，又不销毁原页面。